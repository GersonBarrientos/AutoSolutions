<!doctype html>
<html xmlns:th="http://www.thymeleaf.org" lang="es">
<head th:replace="~{_layout :: head(~{::title})}">
  <title th:text="${empleado != null ? empleado.nombre + ' ' + empleado.apellido : 'Empleado'} + ' · AutoSolutions'">Empleado</title>
</head>

<body th:replace="~{_layout :: layout(~{::title}, ~{::section})}">
<section>

  <!-- Header -->
  <div class="page-header">
    <div class="d-flex justify-content-between align-items-center">
      <div>
        <h1 class="page-title mb-1">
          <i class="bi bi-person-gear me-2" style="color: var(--naranja-intenso);"></i>
          <span th:text="${empleado.nombre + ' ' + empleado.apellido}">Empleado</span>
        </h1>
        <span class="page-subtitle"
              th:text="${empleado.especialidad != null ? empleado.especialidad : 'Sin especialidad'}">
          Especialidad
        </span>
      </div>
      <div class="d-flex gap-2">
        <a th:href="@{/empleados/{id}/editar(id=${empleado.id})}" class="btn btn-primary-minimal">
          <i class="bi bi-pencil me-1"></i> Editar
        </a>
        <button class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#modalEliminar">
          <i class="bi bi-trash me-1"></i> Eliminar
        </button>
        <a th:href="@{/empleados}" class="btn btn-back">
          <i class="bi bi-arrow-left me-1"></i> Volver
        </a>
      </div>
    </div>
  </div>

  <!-- Datos -->
  <div class="card-minimal">
    <div class="card-body">
      <div class="row g-4">
        <div class="col-md-6">
          <h6 class="text-uppercase mb-3" style="font-size: .8125rem; color: var(--gris-texto); letter-spacing: .05em;">
            Información de contacto
          </h6>
          <div class="d-flex flex-column gap-2">
            <div class="d-flex align-items-center gap-2">
              <i class="bi bi-telephone"></i>
              <span th:text="${empleado.telefono}">0000-0000</span>
            </div>
            <div class="d-flex align-items-center gap-2">
              <i class="bi bi-envelope"></i>
              <span th:text="${empleado.email}">email@</span>
            </div>
            <div class="d-flex align-items-center gap-2">
              <i class="bi bi-toggle-on"></i>
              <span class="badge badge-minimal"
                    th:classappend="${empleado.activo} ? 'badge-active' : 'badge-inactive'"
                    th:text="${empleado.activo} ? 'Activo' : 'Inactivo'">Activo</span>
            </div>
          </div>
        </div>

        <div class="col-md-6">
          <h6 class="text-uppercase mb-3" style="font-size: .8125rem; color: var(--gris-texto); letter-spacing: .05em;">
            Información laboral
          </h6>
          <div class="d-flex flex-column gap-2">
            <div class="d-flex align-items-center gap-2">
              <i class="bi bi-briefcase"></i>
              <span th:text="${empleado.especialidad}">Mecánico general</span>
            </div>
            <div class="d-flex align-items-center gap-2">
              <i class="bi bi-calendar-event"></i>
              <span>
                Ingreso:
                <b th:text="${#temporals.format(empleado.fechaIngreso, 'dd/MM/yyyy')}">01/01/2024</b>
              </span>
            </div>
            <div class="d-flex align-items-center gap-2" th:if="${empleado.version != null}">
              <i class="bi bi-hash"></i>
              <span>Versión registro: <b th:text="${empleado.version}">0</b></span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal eliminar -->
  <div class="modal fade modal-minimal" id="modalEliminar" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">
            <i class="bi bi-exclamation-triangle text-danger me-2"></i>
            Confirmar Eliminación
          </h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <p class="mb-0">
            ¿Eliminar al empleado <strong th:text="${empleado.nombre + ' ' + empleado.apellido}">Empleado</strong>?
          </p>
        </div>
        <div class="modal-footer">
          <form th:action="@{/empleados/{id}/eliminar(id=${empleado.id})}" method="post">
            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
            <button type="button" class="btn btn-secondary-minimal" data-bs-dismiss="modal">Cancelar</button>
            <button type="submit" class="btn btn-danger">
              <i class="bi bi-trash me-1"></i> Eliminar
            </button>
          </form>
        </div>
      </div>
    </div>
  </div>

</section>
</body>
</html>
