<!doctype html>
<html xmlns:th="http://www.thymeleaf.org" lang="es">
<head th:replace="~{_layout :: head(~{::title})}">
  <title>Detalle de cliente · AutoSolutions</title>
</head>

<body th:replace="~{_layout :: layout(~{::title}, ~{::section})}">
<section>

  <!-- Header mejorado con avatar -->
  <div class="detail-header">
    <div class="d-flex justify-content-between align-items-start">
      <div class="d-flex align-items-start gap-3">
        <!-- Avatar circular con iniciales -->
        <div class="rounded-circle d-flex align-items-center justify-content-center flex-shrink-0" 
             style="width: 64px; height: 64px; background: linear-gradient(135deg, var(--naranja-intenso), #ff8c42); color: white; font-size: 1.5rem; font-weight: 700; box-shadow: 0 4px 12px rgba(247, 103, 7, 0.2);">
          <span th:text="${#strings.substring(cliente.nombres, 0, 1) + #strings.substring(cliente.apellidos, 0, 1)}">JC</span>
        </div>
        <div>
          <h1 class="detail-title mb-2" th:text="${cliente.nombreCompleto}">Nombre Cliente</h1>
          <div class="d-flex flex-wrap gap-2">
            <span class="badge badge-minimal badge-active">
              <i class="bi bi-person-check me-1"></i> Cliente activo
            </span>
            <span class="badge badge-minimal" style="background: rgba(23, 162, 184, 0.1); color: var(--info);">
              <i class="bi bi-calendar-check me-1"></i>
              Registrado: <span th:text="${#temporals.format(cliente.createdAt, 'dd/MM/yyyy')}">01/01/2025</span>
            </span>
          </div>
        </div>
      </div>
      <div class="d-flex gap-2">
        <a class="btn btn-edit" th:href="@{/clientes/{id}/editar(id=${cliente.id})}">
          <i class="bi bi-pencil me-1"></i> Editar
        </a>
        <a class="btn btn-back" th:href="@{/clientes}">
          <i class="bi bi-arrow-left me-1"></i> Volver
        </a>
      </div>
    </div>
  </div>

  <!-- Grid de información -->
  <div class="row g-3">
    
    <!-- Columna izquierda: Información básica -->
    <div class="col-lg-8">
      
      <!-- Card: Información Personal -->
      <div class="info-card">
        <div class="info-card-title">
          <i class="bi bi-person-vcard"></i>
          Información Personal
        </div>

        <div class="data-grid data-grid-2">
          
          <div class="data-item">
            <span class="data-label">Nombres</span>
            <div class="data-value" th:text="${cliente.nombres}">Nombres</div>
          </div>

          <div class="data-item">
            <span class="data-label">Apellidos</span>
            <div class="data-value" th:text="${cliente.apellidos}">Apellidos</div>
          </div>

        </div>
      </div>

      <!-- Card: Información de Contacto -->
      <div class="info-card">
        <div class="info-card-title">
          <i class="bi bi-telephone"></i>
          Información de Contacto
        </div>

        <div class="data-grid data-grid-2">
          
          <div class="data-item">
            <span class="data-label">Teléfono</span>
            <div class="d-flex align-items-center gap-2">
              <i class="bi bi-telephone-fill" style="color: var(--success); font-size: 1.25rem;"></i>
              <a th:href="'tel:' + ${cliente.telefono}" 
                 class="data-value service-link" 
                 th:text="${cliente.telefono}">0000-0000</a>
            </div>
          </div>

          <div class="data-item">
            <span class="data-label">Correo Electrónico</span>
            <div class="d-flex align-items-center gap-2" th:if="${cliente.email != null and !#strings.isEmpty(cliente.email)}">
              <i class="bi bi-envelope-fill" style="color: var(--info); font-size: 1.25rem;"></i>
              <a th:href="'mailto:' + ${cliente.email}" 
                 class="data-value service-link" 
                 style="font-size: 1rem;"
                 th:text="${cliente.email}">correo@dominio.com</a>
            </div>
            <span class="text-muted" style="font-size: 0.9375rem;" th:if="${cliente.email == null or #strings.isEmpty(cliente.email)}">
              No registrado
            </span>
          </div>

        </div>
      </div>

      <!-- Card: Identificación y Dirección -->
      <div class="info-card">
        <div class="info-card-title">
          <i class="bi bi-geo-alt"></i>
          Identificación y Dirección
        </div>

        <div class="data-grid">
          
          <div class="data-item">
            <span class="data-label">DUI</span>
            <div class="d-flex align-items-center gap-2">
              <i class="bi bi-card-text" style="color: var(--naranja-intenso); font-size: 1.25rem;"></i>
              <span class="badge badge-minimal" 
                    style="background: rgba(247, 103, 7, 0.1); color: var(--naranja-intenso); font-size: 1rem; padding: 0.5rem 1rem;" 
                    th:text="${cliente.dui}">00000000-0</span>
            </div>
          </div>

          <div class="data-item">
            <span class="data-label">Dirección</span>
            <div class="d-flex align-items-start gap-2">
              <i class="bi bi-geo-alt-fill" style="color: var(--danger); font-size: 1.25rem; margin-top: 0.125rem; flex-shrink: 0;"></i>
              <p class="mb-0" style="color: var(--gris-grafito); font-size: 0.9375rem; line-height: 1.6;" th:text="${cliente.direccion ?: 'No registrada'}">
                Dirección
              </p>
            </div>
          </div>

        </div>
      </div>

    </div>

    <!-- Columna derecha: Acciones rápidas y estadísticas -->
    <div class="col-lg-4">
      
      <!-- Card: Acciones rápidas -->
      <div class="info-card">
        <div class="info-card-title">
          <i class="bi bi-lightning-charge-fill" style="color: var(--naranja-intenso);"></i>
          Acciones Rápidas
        </div>

        <div class="d-grid gap-2">
          <a th:href="@{/clientes/{id}/editar(id=${cliente.id})}" class="btn btn-primary-minimal btn-sm">
            <i class="bi bi-pencil me-2"></i> Editar Cliente
          </a>
          <a th:href="@{/vehiculos/nuevo(clienteId=${cliente.id})}" class="btn btn-secondary-minimal btn-sm">
            <i class="bi bi-car-front me-2"></i> Agregar Vehículo
          </a>
          <a th:href="@{/ordenes/nueva(clienteId=${cliente.id})}" class="btn btn-secondary-minimal btn-sm">
            <i class="bi bi-file-earmark-plus me-2"></i> Nueva Orden
          </a>
        </div>
      </div>

      <!-- Card: Estadísticas -->
      <div class="stats-card">
        <div class="stats-icon" style="background: rgba(247, 103, 7, 0.1); color: var(--naranja-intenso);">
          <i class="bi bi-car-front-fill"></i>
        </div>
        <div class="stats-title">Vehículos Registrados</div>
        <div class="stats-value">
          Este cliente tiene <b style="color: var(--naranja-intenso);">—</b> vehículos asociados
        </div>
      </div>

      <div class="stats-card">
        <div class="stats-icon" style="background: rgba(40, 167, 69, 0.1); color: var(--success);">
          <i class="bi bi-clipboard-check-fill"></i>
        </div>
        <div class="stats-title">Historial de Órdenes</div>
        <div class="stats-value">
          Ha realizado <b style="color: var(--success);">—</b> órdenes de trabajo
        </div>
      </div>

      <!-- Card: Contacto directo -->
      <div class="info-card" style="background: linear-gradient(135deg, var(--gris-grafito), #2c3237);">
        <div class="text-center text-white py-2">
          <i class="bi bi-telephone-fill mb-2" style="font-size: 2rem; opacity: 0.9;"></i>
          <p class="mb-2 fw-semibold" style="font-size: 0.875rem; opacity: 0.9;">Llamar al cliente</p>
          <a th:href="'tel:' + ${cliente.telefono}" 
             class="btn btn-sm"
             style="background: rgba(255,255,255,0.2); color: white; border: 1px solid rgba(255,255,255,0.3);">
            <i class="bi bi-telephone me-1"></i>
            <span th:text="${cliente.telefono}">0000-0000</span>
          </a>
        </div>
      </div>

    </div>

  </div>

  <!-- Botón de regreso adicional -->
  <div class="mt-4">
    <a class="btn btn-secondary-minimal" th:href="@{/clientes}">
      <i class="bi bi-arrow-left me-1"></i> Volver al listado de clientes
    </a>
  </div>

</section>
</body>
</html>